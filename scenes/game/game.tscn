[gd_scene load_steps=25 format=3 uid="uid://quenom6jkxmi"]

[ext_resource type="Script" uid="uid://cm4hqh1ifpiuc" path="res://scripts/UiSoundPlayer.cs" id="1_kp23o"]
[ext_resource type="AudioStream" uid="uid://c18cw6opcwl8n" path="res://assets/audio/ui/click_001.ogg" id="2_5jirj"]
[ext_resource type="Script" uid="uid://bl5cpfcp361n1" path="res://scripts/UiSound.cs" id="3_5jirj"]
[ext_resource type="Script" uid="uid://cndyq0syaspg5" path="res://scripts/GameManager.cs" id="3_vaxfo"]
[ext_resource type="AudioStream" uid="uid://cbh2o7irh5lmy" path="res://assets/audio/ui/switch_004.ogg" id="4_3xj4h"]
[ext_resource type="PackedScene" uid="uid://b5kxpk7e7n6ri" path="res://scenes/cars/hatchback.tscn" id="4_ftsea"]
[ext_resource type="AudioStream" uid="uid://c11gwvvxqgkr" path="res://assets/audio/ui/select_001.ogg" id="4_otnwt"]
[ext_resource type="AudioStream" uid="uid://b2kvcbs1acbcs" path="res://assets/audio/ui/toggle_002.ogg" id="5_3xj4h"]
[ext_resource type="Script" uid="uid://ctqoofbnioxhi" path="res://scripts/GameModeController.cs" id="5_otnwt"]
[ext_resource type="Theme" uid="uid://cqn7x347w3gke" path="res://scenes/game/hud_theme.tres" id="6_3xj4h"]
[ext_resource type="Theme" uid="uid://icnr3mmy82ij" path="res://scenes/main_menu/menu_theme.tres" id="7_5v6r0"]
[ext_resource type="PackedScene" uid="uid://c1rq5irkqaorb" path="res://scenes/editor/editor.tscn" id="8_uyinl"]
[ext_resource type="AudioStream" uid="uid://b0givguxksht0" path="res://assets/audio/music/StayInsideMe.mp3" id="9_3xj4h"]
[ext_resource type="PackedScene" uid="uid://c5ka32jnsmy0s" path="res://scenes/main_menu/main_menu.tscn" id="9_10c2w"]
[ext_resource type="PackedScene" uid="uid://dj6oje4umktpq" path="res://scenes/game/pause_menu.tscn" id="10_pg2xm"]
[ext_resource type="PackedScene" uid="uid://m1qpnrxiyo34" path="res://scenes/game/settings_menu.tscn" id="11_gc57s"]

[sub_resource type="Resource" id="Resource_ftsea"]
script = ExtResource("3_5jirj")
AudioStream = ExtResource("2_5jirj")
PitchScale = 0.8
VolumeDb = -3.0
metadata/_custom_type_script = "uid://bl5cpfcp361n1"

[sub_resource type="Resource" id="Resource_vaxfo"]
script = ExtResource("3_5jirj")
AudioStream = ExtResource("2_5jirj")
VolumeDb = -3.0
metadata/_custom_type_script = "uid://bl5cpfcp361n1"

[sub_resource type="Resource" id="Resource_10c2w"]
script = ExtResource("3_5jirj")
AudioStream = ExtResource("4_3xj4h")
PitchScale = 1.1219999999999999
metadata/_custom_type_script = "uid://bl5cpfcp361n1"

[sub_resource type="Resource" id="Resource_otnwt"]
script = ExtResource("3_5jirj")
AudioStream = ExtResource("4_3xj4h")
metadata/_custom_type_script = "uid://bl5cpfcp361n1"

[sub_resource type="Resource" id="Resource_5v6r0"]
script = ExtResource("3_5jirj")
AudioStream = ExtResource("4_otnwt")
metadata/_custom_type_script = "uid://bl5cpfcp361n1"

[sub_resource type="Resource" id="Resource_uyinl"]
script = ExtResource("3_5jirj")
AudioStream = ExtResource("5_3xj4h")
PitchScale = 0.6
VolumeDb = -6.0
metadata/_custom_type_script = "uid://bl5cpfcp361n1"

[sub_resource type="InputEventAction" id="InputEventAction_vtaks"]
action = &"ui_accept"

[sub_resource type="Shortcut" id="Shortcut_kvpfn"]
events = [SubResource("InputEventAction_vtaks")]

[node name="Game" type="Node"]

[node name="UISoundPlayer" type="Node" parent="." node_paths=PackedStringArray("Player")]
script = ExtResource("1_kp23o")
BlockErasedSound = SubResource("Resource_ftsea")
BlockPlacedSound = SubResource("Resource_vaxfo")
CheckpointCollectedSound = SubResource("Resource_10c2w")
LapFinishedSound = SubResource("Resource_otnwt")
Player = NodePath("AudioStreamPlayer")
RaceCountDownSound = SubResource("Resource_5v6r0")
RaceStartSound = SubResource("Resource_uyinl")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="UISoundPlayer"]

[node name="GameManager" type="Node" parent="." node_paths=PackedStringArray("CheckPointLabel", "FinishPanel", "FinishTimeLabel", "LapsLabel", "MusicPlayer", "PauseMenu", "PbLabel", "RaceUi", "SettingsMenu", "SpeedLabel", "StartTimerLabel", "TimeLabel", "TrackInfoLabel", "TrackNode")]
script = ExtResource("3_vaxfo")
CarScene = ExtResource("4_ftsea")
CheckPointLabel = NodePath("RaceUI/CheckPointLabel")
FinishPanel = NodePath("RaceUI/FinishPanel")
FinishTimeLabel = NodePath("RaceUI/FinishPanel/MarginContainer/VBoxContainer/FinishTimeLabel")
LapsLabel = NodePath("RaceUI/LapsLabel")
MusicPlayer = NodePath("MusicPlayer")
PauseMenu = NodePath("../PauseMenu")
PbLabel = NodePath("RaceUI/PersonalBest")
RaceUi = NodePath("RaceUI")
SettingsMenu = NodePath("../SettingsMenu")
SpeedLabel = NodePath("RaceUI/SpeedLabel")
StartTimerLabel = NodePath("RaceUI/StartTimerLabel")
TimeLabel = NodePath("RaceUI/TimeLabel")
TrackInfoLabel = NodePath("RaceUI/TrackInfo")
TrackNode = NodePath("Track")
TrackTemplatePath = "res://scenes/game/track_template.tscn"

[node name="MusicPlayer" type="AudioStreamPlayer" parent="GameManager"]
stream = ExtResource("9_3xj4h")
bus = &"Music"
playback_type = 1
parameters/looping = false

[node name="GameMode" type="Node" parent="GameManager"]
script = ExtResource("5_otnwt")

[node name="Track" type="Node3D" parent="GameManager"]

[node name="RaceUI" type="Control" parent="GameManager"]
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("6_3xj4h")

[node name="TimeLabel" type="Label" parent="GameManager/RaceUI"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -248.0
offset_top = -132.0
offset_right = 254.5
grow_horizontal = 2
grow_vertical = 0
theme_override_font_sizes/font_size = 96
text = "00:00:00"
horizontal_alignment = 1
vertical_alignment = 2

[node name="SpeedLabel" type="Label" parent="GameManager/RaceUI"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_left = 32.0
offset_top = -168.0
offset_right = 264.0
grow_vertical = 0
theme_override_font_sizes/font_size = 96
text = "0"
vertical_alignment = 2

[node name="TrackInfo" type="Label" parent="GameManager/RaceUI"]
layout_mode = 0
offset_left = 16.0
offset_right = 1336.0
offset_bottom = 39.0
theme_override_font_sizes/font_size = 28
text = "TrackName"

[node name="PersonalBest" type="Label" parent="GameManager/RaceUI"]
layout_mode = 1
offset_left = 16.0
offset_top = 36.0
offset_right = 1336.0
offset_bottom = 108.0
theme_override_font_sizes/font_size = 48
text = "PB: "

[node name="StartTimerLabel" type="Label" parent="GameManager/RaceUI"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -230.0
offset_top = -265.75
offset_right = 230.0
offset_bottom = 265.75
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 150
text = "3
"
horizontal_alignment = 1
vertical_alignment = 1

[node name="CheckPointLabel" type="Label" parent="GameManager/RaceUI"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -32.0
offset_top = -160.0
offset_right = 39.0
offset_bottom = -101.0
grow_horizontal = 2
grow_vertical = 0
theme_override_font_sizes/font_size = 48
text = "0/0"
vertical_alignment = 1

[node name="LapsLabel" type="Label" parent="GameManager/RaceUI"]
layout_mode = 1
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -224.0
offset_right = -16.0
offset_bottom = 67.0
grow_horizontal = 0
theme_override_font_sizes/font_size = 48
text = "Laps: 0/0"
horizontal_alignment = 2

[node name="FinishPanel" type="PanelContainer" parent="GameManager/RaceUI"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -378.0
offset_top = -264.0
offset_right = 378.0
offset_bottom = 264.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("7_5v6r0")

[node name="MarginContainer" type="MarginContainer" parent="GameManager/RaceUI/FinishPanel"]
layout_mode = 2

[node name="VBoxContainer" type="VBoxContainer" parent="GameManager/RaceUI/FinishPanel/MarginContainer"]
layout_mode = 2
alignment = 1

[node name="FinishTimeLabel" type="Label" parent="GameManager/RaceUI/FinishPanel/MarginContainer/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
text = "Race Time: "
horizontal_alignment = 1
vertical_alignment = 1

[node name="Button" type="Button" parent="GameManager/RaceUI/FinishPanel/MarginContainer/VBoxContainer"]
layout_mode = 2
shortcut = SubResource("Shortcut_kvpfn")
text = "Ok"

[node name="Editor" parent="." instance=ExtResource("8_uyinl")]
visible = false

[node name="MainMenu" parent="." instance=ExtResource("9_10c2w")]

[node name="PauseMenu" parent="." instance=ExtResource("10_pg2xm")]

[node name="SettingsMenu" parent="." instance=ExtResource("11_gc57s")]
visible = false

[connection signal="pressed" from="GameManager/RaceUI/FinishPanel/MarginContainer/VBoxContainer/Button" to="GameManager" method="OnFinishButtonPressed"]
