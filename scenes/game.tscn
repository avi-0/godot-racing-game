[gd_scene load_steps=14 format=3 uid="uid://quenom6jkxmi"]

[ext_resource type="Script" uid="uid://cm4hqh1ifpiuc" path="res://scripts/UiSoundPlayer.cs" id="1_gee14"]
[ext_resource type="AudioStream" uid="uid://c18cw6opcwl8n" path="res://assets/audio/click_001.ogg" id="2_0tnpc"]
[ext_resource type="PackedScene" uid="uid://c1rq5irkqaorb" path="res://scenes/editor.tscn" id="5_p57ef"]
[ext_resource type="Theme" uid="uid://cqn7x347w3gke" path="res://resources/hud_theme.tres" id="6_dinhu"]
[ext_resource type="Theme" uid="uid://icnr3mmy82ij" path="res://resources/menu_theme.tres" id="6_kvpfn"]
[ext_resource type="PackedScene" uid="uid://dj6oje4umktpq" path="res://scenes/pause_menu.tscn" id="7_0tnpc"]
[ext_resource type="Script" uid="uid://cndyq0syaspg5" path="res://scripts/GameManager.cs" id="7_trtic"]
[ext_resource type="PackedScene" uid="uid://m1qpnrxiyo34" path="res://scenes/settings_menu.tscn" id="8_gee14"]
[ext_resource type="Script" uid="uid://ctqoofbnioxhi" path="res://scripts/GameModeController.cs" id="10_vtaks"]
[ext_resource type="PackedScene" uid="uid://b5kxpk7e7n6ri" path="res://scenes/cars/hatchback.tscn" id="12_kvuet"]
[ext_resource type="PackedScene" uid="uid://c5ka32jnsmy0s" path="res://scenes/main_menu.tscn" id="12_trtic"]

[sub_resource type="InputEventAction" id="InputEventAction_vtaks"]
action = &"ui_accept"

[sub_resource type="Shortcut" id="Shortcut_kvpfn"]
events = [SubResource("InputEventAction_vtaks")]

[node name="Game" type="Node"]

[node name="UISoundPlayer" type="Node" parent="." node_paths=PackedStringArray("Player")]
script = ExtResource("1_gee14")
Player = NodePath("AudioStreamPlayer")
BlockPlacedSound = ExtResource("2_0tnpc")

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="UISoundPlayer"]

[node name="GameManager" type="Node" parent="." node_paths=PackedStringArray("PauseMenu", "SettingsMenu", "TrackNode", "RaceUi", "TimeLabel", "SpeedLabel", "PbLabel", "StartTimerLabel", "CheckPointLabel", "FinishPanel", "FinishTimeLabel")]
script = ExtResource("7_trtic")
TrackTemplatePath = "res://scenes/track_template.tscn"
CarScene = ExtResource("12_kvuet")
PauseMenu = NodePath("../PauseMenu")
SettingsMenu = NodePath("../SettingsMenu")
TrackNode = NodePath("Track")
RaceUi = NodePath("RaceUI")
TimeLabel = NodePath("RaceUI/TimeLabel")
SpeedLabel = NodePath("RaceUI/SpeedLabel")
PbLabel = NodePath("RaceUI/PersonalBest")
StartTimerLabel = NodePath("RaceUI/StartTimerLabel")
CheckPointLabel = NodePath("RaceUI/CheckPointLabel")
FinishPanel = NodePath("RaceUI/FinishPanel")
FinishTimeLabel = NodePath("RaceUI/FinishPanel/MarginContainer/VBoxContainer/FinishTimeLabel")

[node name="GameMode" type="Node" parent="GameManager"]
script = ExtResource("10_vtaks")

[node name="Track" type="Node3D" parent="GameManager"]

[node name="RaceUI" type="Control" parent="GameManager"]
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("6_dinhu")

[node name="TimeLabel" type="Label" parent="GameManager/RaceUI"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -254.5
offset_top = -117.0
offset_right = 254.5
grow_horizontal = 2
grow_vertical = 0
theme_override_font_sizes/font_size = 96
text = "00:00:00"
horizontal_alignment = 1
vertical_alignment = 1

[node name="SpeedLabel" type="Label" parent="GameManager/RaceUI"]
layout_mode = 1
anchors_preset = 2
anchor_top = 1.0
anchor_bottom = 1.0
offset_top = -117.0
offset_right = 175.0
grow_vertical = 0
theme_override_font_sizes/font_size = 96
text = "0"
horizontal_alignment = 1
vertical_alignment = 1

[node name="PersonalBest" type="Label" parent="GameManager/RaceUI"]
layout_mode = 1
offset_left = 8.0
offset_top = 8.0
offset_right = 1328.0
offset_bottom = 80.0
theme_override_font_sizes/font_size = 48
text = "PB: "
vertical_alignment = 1

[node name="StartTimerLabel" type="Label" parent="GameManager/RaceUI"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -230.0
offset_top = -265.75
offset_right = 230.0
offset_bottom = 265.75
grow_horizontal = 2
grow_vertical = 2
theme_override_font_sizes/font_size = 150
text = "3
"
horizontal_alignment = 1
vertical_alignment = 1

[node name="CheckPointLabel" type="Label" parent="GameManager/RaceUI"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -32.0
offset_top = -160.0
offset_right = 39.0
offset_bottom = -101.0
grow_horizontal = 2
grow_vertical = 0
theme_override_font_sizes/font_size = 48
text = "0/0"
vertical_alignment = 1

[node name="FinishPanel" type="PanelContainer" parent="GameManager/RaceUI"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -378.0
offset_top = -264.0
offset_right = 378.0
offset_bottom = 264.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("6_kvpfn")

[node name="MarginContainer" type="MarginContainer" parent="GameManager/RaceUI/FinishPanel"]
layout_mode = 2

[node name="VBoxContainer" type="VBoxContainer" parent="GameManager/RaceUI/FinishPanel/MarginContainer"]
layout_mode = 2
alignment = 1

[node name="FinishTimeLabel" type="Label" parent="GameManager/RaceUI/FinishPanel/MarginContainer/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
text = "Race Time: "
horizontal_alignment = 1
vertical_alignment = 1

[node name="Button" type="Button" parent="GameManager/RaceUI/FinishPanel/MarginContainer/VBoxContainer"]
layout_mode = 2
shortcut = SubResource("Shortcut_kvpfn")
text = "Ok"

[node name="Editor" parent="." instance=ExtResource("5_p57ef")]
visible = false

[node name="MainMenu" parent="." instance=ExtResource("12_trtic")]

[node name="PauseMenu" parent="." instance=ExtResource("7_0tnpc")]

[node name="SettingsMenu" parent="." instance=ExtResource("8_gee14")]
visible = false

[connection signal="pressed" from="GameManager/RaceUI/FinishPanel/MarginContainer/VBoxContainer/Button" to="GameManager" method="OnFinishButtonPressed"]
