[gd_scene load_steps=30 format=3 uid="uid://c1rq5irkqaorb"]

[ext_resource type="Script" uid="uid://biv5ncp5iinu5" path="res://scripts/Editor.cs" id="1_5lcyj"]
[ext_resource type="Material" uid="uid://dsii22abj8h8d" path="res://resources/block_erase_material.tres" id="3_j8y2p"]
[ext_resource type="PackedScene" uid="uid://c0td1bm70sbv8" path="res://blocks/road/_scenes/road-straight.tscn" id="3_o435n"]
[ext_resource type="Material" uid="uid://cii18sx6kkh7w" path="res://resources/block_highlight_material.tres" id="4_o435n"]
[ext_resource type="Texture2D" uid="uid://dyx154afg0s1q" path="res://assets/godot-icons/RangeSliderLeft.svg" id="5_3vi5u"]
[ext_resource type="Texture2D" uid="uid://hmfs1b0dmqq1" path="res://assets/godot-icons/RangeSliderRight.svg" id="6_78fwb"]
[ext_resource type="PackedScene" uid="uid://dklqrgy3scfr7" path="res://scenes/editor/editor_block_button.tscn" id="6_j8y2p"]
[ext_resource type="Theme" uid="uid://d0edsagec8yv6" path="res://resources/editor_theme.tres" id="6_o435n"]
[ext_resource type="Texture2D" uid="uid://dvltcw8wlvlh3" path="res://assets/godot-icons/Play.svg" id="7_3vi5u"]
[ext_resource type="Script" uid="uid://ec3tpqskxxmf" path="res://scripts/EditorViewport.cs" id="7_74j0u"]
[ext_resource type="Texture2D" uid="uid://vrvcfkufywdw" path="res://assets/godot-icons/Close.svg" id="7_78fwb"]
[ext_resource type="Texture2D" uid="uid://c7cgy8pdtwccw" path="res://assets/godot-icons/FileBrowse.svg" id="8_74j0u"]
[ext_resource type="Script" uid="uid://d4wjoyefkgcw" path="res://scripts/TreePopupFix.cs" id="9_j8y2p"]
[ext_resource type="Texture2D" uid="uid://kedovh6u17wl" path="res://assets/godot-icons/Save.svg" id="9_sdh1e"]
[ext_resource type="Theme" uid="uid://g7t3ddg3tu7f" path="res://scenes/editor/tool_panel_theme.tres" id="14_5tdu1"]
[ext_resource type="Texture2D" uid="uid://ckprvp4bgfutw" path="res://assets/godot-icons/Eraser.svg" id="17_0u1f5"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_o435n"]
bg_color = Color(0.28485027, 0.2848503, 0.28485018, 1)

[sub_resource type="InputEventAction" id="InputEventAction_sdh1e"]
action = &"ui_cancel"

[sub_resource type="Shortcut" id="Shortcut_2w0at"]
events = [SubResource("InputEventAction_sdh1e")]

[sub_resource type="InputEventKey" id="InputEventKey_sdh1e"]
device = -1
ctrl_pressed = true
keycode = 79

[sub_resource type="Shortcut" id="Shortcut_5tdu1"]
events = [SubResource("InputEventKey_sdh1e")]

[sub_resource type="InputEventKey" id="InputEventKey_2w0at"]
device = -1
ctrl_pressed = true
keycode = 83

[sub_resource type="Shortcut" id="Shortcut_q8l03"]
events = [SubResource("InputEventKey_2w0at")]

[sub_resource type="InputEventKey" id="InputEventKey_kvpfn"]
device = -1
keycode = 4194306

[sub_resource type="Shortcut" id="Shortcut_dinhu"]
events = [SubResource("InputEventKey_kvpfn")]

[sub_resource type="InputEventKey" id="InputEventKey_dinhu"]
device = -1
keycode = 49
unicode = 49

[sub_resource type="Shortcut" id="Shortcut_kvuet"]
events = [SubResource("InputEventKey_dinhu")]

[sub_resource type="InputEventKey" id="InputEventKey_kvuet"]
device = -1
keycode = 50
unicode = 50

[sub_resource type="Shortcut" id="Shortcut_trtic"]
events = [SubResource("InputEventKey_kvuet")]

[node name="Editor" type="Control" node_paths=PackedStringArray("EditorViewport", "Camera", "BlockListContainer", "QuitButton", "OpenButton", "SaveButton", "PlayButton", "FileDialog", "ConfirmNewDialog", "ConfirmQuitDialog", "CarSelect", "CarSelectContainer", "EditorUINode", "GridSizeLabel", "GridSizeDecButton", "GridSizeIncButton", "HSplitContainer", "DirectoryListContainer", "OptionsTree", "EraseButton")]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("6_o435n")
script = ExtResource("1_5lcyj")
CameraSpeed = 48.0
EditorViewport = NodePath("EditorUI/HSplitContainer/VBoxContainer/ViewportWrapper/SubViewportContainer/EditorViewport")
Camera = NodePath("EditorUI/HSplitContainer/VBoxContainer/ViewportWrapper/SubViewportContainer/EditorViewport/EditorCamera")
BlockScene = ExtResource("3_o435n")
BlockEraseHighlightMaterial = ExtResource("3_j8y2p")
BlockHighlightMaterial = ExtResource("4_o435n")
BlockListContainer = NodePath("EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer/BlockListContainer")
QuitButton = NodePath("EditorUI/HSplitContainer/VBoxContainer/MarginContainer/HBoxContainer/QuitButton")
OpenButton = NodePath("EditorUI/HSplitContainer/VBoxContainer/MarginContainer/HBoxContainer/OpenButton")
SaveButton = NodePath("EditorUI/HSplitContainer/VBoxContainer/MarginContainer/HBoxContainer/SaveButton")
PlayButton = NodePath("EditorUI/HSplitContainer/VBoxContainer/MarginContainer/HBoxContainer/PlayButton")
FileDialog = NodePath("FileDialog")
ConfirmNewDialog = NodePath("ConfirmNewDialog")
ConfirmQuitDialog = NodePath("ConfirmQuitDialog")
CarSelect = NodePath("CarSelect")
CarSelectContainer = NodePath("CarSelect/GridContainer")
EditorUINode = NodePath("EditorUI")
GridSizeLabel = NodePath("EditorUI/HSplitContainer/VBoxContainer/MarginContainer2/HBoxContainer/LineEdit")
GridSizeDecButton = NodePath("EditorUI/HSplitContainer/VBoxContainer/MarginContainer2/HBoxContainer/DecreaseButton")
GridSizeIncButton = NodePath("EditorUI/HSplitContainer/VBoxContainer/MarginContainer2/HBoxContainer/IncreaseButton")
EditorBlockButtonScene = ExtResource("6_j8y2p")
HSplitContainer = NodePath("EditorUI/HSplitContainer")
DirectoryListContainer = NodePath("EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer/DirectoryListContainer")
OptionsTree = NodePath("EditorUI/HSplitContainer/MarginContainer/TabContainer/Options/Tree")
EraseButton = NodePath("EditorUI/HSplitContainer/VBoxContainer/ViewportWrapper/Control/MarginContainer/ToolContainer/EraseButton")

[node name="Panel" type="Panel" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_styles/panel = SubResource("StyleBoxFlat_o435n")

[node name="EditorUI" type="Control" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 1

[node name="HSplitContainer" type="HSplitContainer" parent="EditorUI"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 0
split_offset = 615
drag_area_highlight_in_editor = true

[node name="VBoxContainer" type="VBoxContainer" parent="EditorUI/HSplitContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/separation = 0

[node name="MarginContainer" type="MarginContainer" parent="EditorUI/HSplitContainer/VBoxContainer"]
layout_mode = 2
theme_override_constants/margin_left = 4
theme_override_constants/margin_top = 4
theme_override_constants/margin_right = 4
theme_override_constants/margin_bottom = 4

[node name="HBoxContainer" type="HBoxContainer" parent="EditorUI/HSplitContainer/VBoxContainer/MarginContainer"]
layout_mode = 2

[node name="QuitButton" type="Button" parent="EditorUI/HSplitContainer/VBoxContainer/MarginContainer/HBoxContainer"]
layout_mode = 2
shortcut = SubResource("Shortcut_2w0at")
text = "Quit"
icon = ExtResource("7_78fwb")

[node name="OpenButton" type="Button" parent="EditorUI/HSplitContainer/VBoxContainer/MarginContainer/HBoxContainer"]
layout_mode = 2
shortcut = SubResource("Shortcut_5tdu1")
text = "Open"
icon = ExtResource("8_74j0u")

[node name="SaveButton" type="Button" parent="EditorUI/HSplitContainer/VBoxContainer/MarginContainer/HBoxContainer"]
layout_mode = 2
shortcut = SubResource("Shortcut_q8l03")
text = "Save"
icon = ExtResource("9_sdh1e")

[node name="PlayButton" type="Button" parent="EditorUI/HSplitContainer/VBoxContainer/MarginContainer/HBoxContainer"]
layout_mode = 2
tooltip_text = "Play the track"
shortcut = SubResource("Shortcut_dinhu")
text = "Play"
icon = ExtResource("7_3vi5u")

[node name="MarginContainer2" type="MarginContainer" parent="EditorUI/HSplitContainer/VBoxContainer"]
layout_mode = 2
theme_override_constants/margin_left = 4
theme_override_constants/margin_right = 4
theme_override_constants/margin_bottom = 4

[node name="HBoxContainer" type="HBoxContainer" parent="EditorUI/HSplitContainer/VBoxContainer/MarginContainer2"]
layout_mode = 2

[node name="Label" type="Label" parent="EditorUI/HSplitContainer/VBoxContainer/MarginContainer2/HBoxContainer"]
layout_mode = 2
text = "Grid Size"

[node name="LineEdit" type="LineEdit" parent="EditorUI/HSplitContainer/VBoxContainer/MarginContainer2/HBoxContainer"]
layout_mode = 2
focus_mode = 0
placeholder_text = "0"
editable = false

[node name="DecreaseButton" type="Button" parent="EditorUI/HSplitContainer/VBoxContainer/MarginContainer2/HBoxContainer"]
layout_mode = 2
shortcut = SubResource("Shortcut_kvuet")
icon = ExtResource("5_3vi5u")

[node name="IncreaseButton" type="Button" parent="EditorUI/HSplitContainer/VBoxContainer/MarginContainer2/HBoxContainer"]
layout_mode = 2
shortcut = SubResource("Shortcut_trtic")
icon = ExtResource("6_78fwb")

[node name="ViewportWrapper" type="Control" parent="EditorUI/HSplitContainer/VBoxContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="SubViewportContainer" type="SubViewportContainer" parent="EditorUI/HSplitContainer/VBoxContainer/ViewportWrapper"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
focus_neighbor_left = NodePath(".")
focus_neighbor_top = NodePath(".")
focus_neighbor_right = NodePath(".")
focus_neighbor_bottom = NodePath(".")
focus_next = NodePath(".")
focus_previous = NodePath(".")
stretch = true
mouse_target = true

[node name="EditorViewport" type="SubViewport" parent="EditorUI/HSplitContainer/VBoxContainer/ViewportWrapper/SubViewportContainer"]
handle_input_locally = false
screen_space_aa = 1
physics_object_picking = true
size = Vector2i(1571, 1008)
render_target_update_mode = 4
script = ExtResource("7_74j0u")

[node name="EditorCamera" type="Camera3D" parent="EditorUI/HSplitContainer/VBoxContainer/ViewportWrapper/SubViewportContainer/EditorViewport"]
physics_interpolation_mode = 2
transform = Transform3D(1, 0, 0, 0, 0.7071068, 0.7071068, 0, -0.7071068, 0.7071068, 0, 24, 0)
current = true
fov = 80.0

[node name="Control" type="Control" parent="EditorUI/HSplitContainer/VBoxContainer/ViewportWrapper"]
layout_mode = 1
anchors_preset = 9
anchor_bottom = 1.0
grow_vertical = 2

[node name="MarginContainer" type="MarginContainer" parent="EditorUI/HSplitContainer/VBoxContainer/ViewportWrapper/Control"]
layout_mode = 1
anchors_preset = 9
anchor_bottom = 1.0
offset_right = 71.0
grow_vertical = 2
theme_override_constants/margin_left = 8
theme_override_constants/margin_top = 8
theme_override_constants/margin_right = 8
theme_override_constants/margin_bottom = 8

[node name="ToolContainer" type="VBoxContainer" parent="EditorUI/HSplitContainer/VBoxContainer/ViewportWrapper/Control/MarginContainer"]
layout_mode = 2
theme = ExtResource("14_5tdu1")

[node name="EraseButton" type="Button" parent="EditorUI/HSplitContainer/VBoxContainer/ViewportWrapper/Control/MarginContainer/ToolContainer"]
layout_mode = 2
tooltip_text = "(hold X)"
toggle_mode = true
action_mode = 0
text = "Erase
"
icon = ExtResource("17_0u1f5")

[node name="MarginContainer" type="MarginContainer" parent="EditorUI/HSplitContainer"]
layout_mode = 2
size_flags_horizontal = 3
theme_override_constants/margin_left = 0
theme_override_constants/margin_top = 8
theme_override_constants/margin_right = 8
theme_override_constants/margin_bottom = 8

[node name="TabContainer" type="TabContainer" parent="EditorUI/HSplitContainer/MarginContainer"]
layout_mode = 2
size_flags_horizontal = 3
current_tab = 0

[node name="Blocks" type="ScrollContainer" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer"]
layout_mode = 2
mouse_filter = 0
mouse_force_pass_scroll_events = false
horizontal_scroll_mode = 0
metadata/_tab_index = 0

[node name="MarginContainer" type="MarginContainer" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/margin_left = 8
theme_override_constants/margin_top = 8
theme_override_constants/margin_right = 8
theme_override_constants/margin_bottom = 8

[node name="VBoxContainer" type="VBoxContainer" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="DirectoryListContainer" type="VBoxContainer" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer"]
layout_mode = 2

[node name="BlockListContainer" type="GridContainer" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer"]
layout_mode = 2
columns = 4

[node name="EditorBlockButton" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer/BlockListContainer" instance=ExtResource("6_j8y2p")]
layout_mode = 2

[node name="EditorBlockButton2" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer/BlockListContainer" instance=ExtResource("6_j8y2p")]
layout_mode = 2

[node name="EditorBlockButton3" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer/BlockListContainer" instance=ExtResource("6_j8y2p")]
layout_mode = 2

[node name="EditorBlockButton4" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer/BlockListContainer" instance=ExtResource("6_j8y2p")]
layout_mode = 2

[node name="EditorBlockButton5" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer/BlockListContainer" instance=ExtResource("6_j8y2p")]
layout_mode = 2

[node name="EditorBlockButton6" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer/BlockListContainer" instance=ExtResource("6_j8y2p")]
layout_mode = 2

[node name="EditorBlockButton7" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer/BlockListContainer" instance=ExtResource("6_j8y2p")]
layout_mode = 2

[node name="EditorBlockButton8" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer/BlockListContainer" instance=ExtResource("6_j8y2p")]
layout_mode = 2

[node name="EditorBlockButton9" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer/BlockListContainer" instance=ExtResource("6_j8y2p")]
layout_mode = 2

[node name="EditorBlockButton10" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer/BlockListContainer" instance=ExtResource("6_j8y2p")]
layout_mode = 2

[node name="EditorBlockButton11" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer/BlockListContainer" instance=ExtResource("6_j8y2p")]
layout_mode = 2

[node name="EditorBlockButton12" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer/BlockListContainer" instance=ExtResource("6_j8y2p")]
layout_mode = 2

[node name="EditorBlockButton13" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer/BlockListContainer" instance=ExtResource("6_j8y2p")]
layout_mode = 2

[node name="Options" type="MarginContainer" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer"]
visible = false
layout_mode = 2
theme_override_constants/margin_top = 8
theme_override_constants/margin_right = 9
theme_override_constants/margin_bottom = 8
metadata/_tab_index = 1

[node name="Tree" type="Tree" parent="EditorUI/HSplitContainer/MarginContainer/TabContainer/Options"]
layout_mode = 2
columns = 2
hide_root = true
script = ExtResource("9_j8y2p")

[node name="ConfirmNewDialog" type="ConfirmationDialog" parent="."]
oversampling_override = 1.0
initial_position = 1
size = Vector2i(565, 100)
dialog_text = "Are you sure you want to create a new track? Unsaved data will be lost."

[node name="ConfirmQuitDialog" type="ConfirmationDialog" parent="."]
oversampling_override = 1.0
initial_position = 1
size = Vector2i(565, 100)
dialog_text = "Are you sure you want to quit? Unsaved data will be lost."

[node name="FileDialog" type="FileDialog" parent="."]
transparent_bg = true
oversampling_override = 1.0
initial_position = 1
transparent = true
display_mode = 1
access = 1
root_subfolder = "tracks/"
filters = PackedStringArray("*.tk.tscn;Track Files;application/x-godot-resource")
hidden_files_toggle_enabled = false
file_filter_toggle_enabled = false
favorites_enabled = false
recent_list_enabled = false

[node name="CarSelect" type="Control" parent="."]
visible = false
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -422.1
offset_top = -244.79999
offset_right = 422.1
offset_bottom = 244.79999
grow_horizontal = 2
grow_vertical = 2

[node name="Panel" type="Panel" parent="CarSelect"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="GridContainer" type="GridContainer" parent="CarSelect"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[editable path="EditorUI/HSplitContainer/MarginContainer/TabContainer/Blocks/MarginContainer/VBoxContainer/BlockListContainer/EditorBlockButton"]
